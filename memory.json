{"type":"entity","name":"YouTube Automation Tool","entityType":"Project","observations":["A Go-based command-line tool for automating YouTube video publishing workflow","Features include: YouTube video uploads with metadata, Hugo blog integration, Bluesky social media posting","Configuration via settings.yaml file and environment variables","Key files: main.go, cli.go, youtube.go, email.go, hugo.go, bluesky.go","Claude Code completed comprehensive PRD analysis for Enhanced Multi-Channel Notification System","Analysis identified PRD strengths: well-structured, business-driven, comprehensive with realistic 15 requirements","Key gaps identified: ambiguous event definitions, undefined rich content, missing user personas, vague batch processing","Technical architecture review shows strong event-driven design aligning with existing phase system","Recommended 3-week implementation plan: Week 1 Foundation (event system core), Week 2 Advanced Features (batch processing, templates), Week 3 Testing & Polish","Risk assessment identifies external service dependencies and event system performance as high-risk areas","Success metrics defined: >99% delivery rate, <2 seconds processing time, 99.9% uptime, >90% test coverage","Analysis leverages existing Slack integration and email system, suggests building on current video lifecycle","Implemented basic multi-channel notification system for video phase transitions","Created event-driven architecture with EventBus and NotificationChannel interface","Implemented EmailChannel adapter using existing email service (sends HTML notifications)","Implemented SlackChannel adapter using existing Slack service (sends simple text notifications)","Added notification configuration to settings.yaml with enable/disable flags","Integrated notification system into VideoService.UpdateVideo() to detect phase changes","Added notification initialization to main.go startup sequence","Created comprehensive test suite for notification system components","System automatically detects video phase transitions and sends notifications via email and Slack","Basic PoC demonstrates core functionality while keeping implementation simple","Configuration-driven system respects notification settings in settings.yaml","Asynchronous notification delivery to prevent blocking video operations"]}
{"type":"entity","name":"Project Config","entityType":"Configuration","observations":["Uses settings.yaml with sections for email, AI, YouTube, Hugo, and Bluesky","Sensitive data can use environment variables: EMAIL_PASSWORD, AI_KEY, YOUTUBE_API_KEY, BLUESKY_PASSWORD","Required flags include email settings, AI settings (Azure OpenAI), YouTube API key, and Hugo path","Optional flags for Bluesky integration"]}
{"type":"entity","name":"Project Requirements","entityType":"Dependencies","observations":["Go 1.x","YouTube API credentials (client_secret.json)","Azure OpenAI API key","Email account for notifications","Optional: Hugo site repository","Optional: Bluesky account"]}
{"type":"entity","name":"Git Workflow Rule","entityType":"Process","observations":["When pushing changes to Git, add a list of completed Taskmaster tasks to the PR description","Mark tasks as 'done' in the PR description that have been completed in the current work","Always include task IDs and titles for clear tracking of completed work","This provides better visibility into what each PR accomplishes"]}
{"type":"entity","name":"Charmbracelet Libraries","entityType":"UI Framework","observations":["The YouTube Automation project uses Charmbracelet libraries for its terminal UI components","Uses 'huh' library for interactive forms and confirmation dialogs","Uses 'lipgloss' for terminal styling and text formatting","Part of the confirmation utility implementation in pkg/utils/confirmation.go","Provides a consistent and user-friendly terminal UI experience"]}
{"type":"entity","entityType":"TestingGuideline","name":"MockingStrategy","observations":["Avoid doing mock except when working with external APIs.","Focus on integration tests with temporary files and actual file system operations where possible for non-external API interactions."]}
{"type":"entity","observations":["The project is written in Go.","The project is hosted on GitHub.","The `gh` CLI can be used for GitHub command-line operations.","The `github` MCP toolset can be used for interacting with the GitHub API."],"name":"youtube-automation","entityType":"Project"}
{"type":"entity","observations":["The `tasks/` directory and its contents are listed in `.gitignore`.","When removing task files as part of a workflow (like PR finalization):","1. Remove ALL files from the `tasks/` directory using `rm -rf tasks/*` or `rm -f tasks/*` (if you want to be prompted for directories). Be cautious with `rm -rf`.","2. This is a local filesystem change, not a staged `git rm` action, due to `.gitignore`."],"name":"TasksDirectoryHandling","entityType":"ProjectConfiguration"}
{"type":"entity","name":"Test-Driven Development","observations":["ACTION REQUIRED: YOU MUST APPLY Test-Driven Development (TDD) for all code changes in this project.","FIRST STEP: Before proposing *any* code modification (e.g., via `edit_file`) or writing implementation code, ALWAYS write the necessary test(s) first.","TDD CYCLE: Follow the Red-Green-Refactor cycle (Write failing test -> Write code to pass -> Refactor).","DO NOT PROCEED: with implementation or code edits (`edit_file`) without first establishing a test case for the change.","TDD is a software development approach where tests are written before the code implementation.","Benefits include better design, higher code quality, built-in regression testing, and clear specification of requirements.","**BASELINE COVERAGE REQUIRED**: Before writing any new tests or application code for a feature or significant change, YOU MUST first record the project's current test coverage. Use: `go test ./... -cover > baseline-coverage.txt 2>&1` to save results to a file. This prevents losing baseline numbers in long sessions and enables accurate before/after comparison.","CRITICAL WORKFLOW STEP: Immediately after parsing a PRD and *before* identifying or starting the first task that involves writing tests or application code (as per TDD), ALWAYS run and save the baseline test coverage: `go test ./... -cover > baseline-coverage.txt 2>&1`. Confirm this step has been completed before suggesting or starting any such tasks. At the end, compare final coverage with saved baseline.","BASELINE FILE USAGE: The baseline-coverage.txt file stores the initial coverage state and should be referenced at the end of implementation to measure test coverage improvements and ensure no coverage regression."],"entityType":"Development Principle"}
{"type":"entity","name":"Get PRDs","entityType":"UserIntent","observations":["User wants to work with Taskmaster and GitHub issues labeled PRD."]}
{"type":"entity","observations":["A tool for managing software development projects with AI-powered task generation and breakdown capabilities.","CRITICAL: Subtask IDs use the format parentTaskId.subtaskId (e.g., 2.1, 2.2, 2.3) NOT just simple numbers","When using set_task_status or update_subtask commands, always use the full format like 2.1, not just 1","The subtasks array in get_tasks shows simple IDs (1, 2, 3) but the actual commands require the parent.child format","This is essential for proper task management and avoiding ID confusion","OVER-ENGINEERING PROBLEM IDENTIFIED: AI task generation tends to create comprehensive enterprise-level solutions when simple MVP implementations are sufficient","ROOT CAUSES OF OVER-ENGINEERING:","- PRD parsing focuses on 'comprehensive systems' rather than 'expose existing functionality'","- AI assumes complex enterprise features are needed without validation","- Pattern matching follows 'typical enterprise API' instead of 'simple function exposure'","- Lack of MVP-first thinking generates full-featured systems instead of minimum viable implementations","PROCESS IMPROVEMENTS FOR FUTURE PRD PARSING:","1. ENHANCED PRD ANALYSIS: Use research queries before task generation: 'What is the simplest way to achieve [PRD core requirement]?' and 'What existing code can be reused?'","2. MVP-FIRST TASK GENERATION: Update parse_prd prompts to include 'Generate tasks for MVP implementation first', 'Prioritize reusing existing code over creating new abstractions', 'Defer enterprise features unless explicitly required'","3. TWO-PHASE PLANNING: Phase 1 - Core MVP tasks (5-8 tasks max), Phase 2 - Enhancement tasks only if proven necessary","4. REALITY CHECK QUESTIONS: Before expanding tasks ask: 'Does this directly solve a user problem?', 'Can we achieve the goal without this complexity?', 'Is there existing code that does this?'","5. COMPLEXITY BUDGET: Limit initial task generation to 6-8 tasks maximum, use --mvp-only flag conceptually","6. REUSE-FIRST PRINCIPLE: Always analyze existing codebase before creating new abstractions","KEY PRINCIPLE: 'Start with the simplest solution that works, then add complexity only when proven necessary'","IMPLEMENTATION SUCCESS: Successfully exposed 6 existing AI functions as REST API endpoints with comprehensive testing (129 tests, 5,797+ RPS performance)","TASKMASTER WORKFLOW IMPROVEMENT: Always validate task necessity against core PRD requirements before implementation","LESSON LEARNED: AI task generation often over-engineers - example case generated 15 tasks but only 5 were actually needed (67% over-engineering rate)","SUCCESSFUL PATTERN: API Endpoint Creation Example","- OVER-ENGINEERED APPROACH: 15 tasks including multiple AI providers, complex abstractions, enterprise features","- MVP APPROACH: 5 tasks - analyze existing code, create simple HTTP handlers, call existing AI functions, return JSON, add tests","- RESULT: Zero code duplication achieved by reusing existing functions instead of building new abstractions"],"name":"Taskmaster","entityType":"Tool"}
{"type":"entity","entityType":"DataSource","observations":["These issues are used as Product Requirement Documents."],"name":"GitHub Issues with PRD label"}
{"type":"entity","name":"youtube-automation Go project build process","entityType":"build_process","observations":["This Go project utilizes a `vendor` directory for its dependencies.","After modifying Go dependencies (e.g., with `go get` or `go mod tidy`), `go mod vendor` must be run to synchronize the `vendor` directory."]}
{"type":"entity","name":"youtube-web","entityType":"Repository","observations":["Frontend repository that consumes the YouTube Automation API","Should receive PRDs when the youtube-automation API changes","PRDs should contain all information needed for frontend implementation of API changes"]}
{"type":"entity","name":"Memory MCP Usage Restriction","entityType":"AgentBehaviorGuideline","observations":["The agent must only READ from memory MCP (search, open nodes, read graph) unless explicitly instructed by the user to add or update memory information","Do NOT create new entities, observations, or relations without explicit user request","Do NOT update existing memory entries unless specifically asked by the user","Memory modifications should only occur when the user explicitly says to memorize, remember, or update something in memory","This ensures memory remains under user control and prevents unwanted automatic memory updates"]}
{"type":"entity","name":"Testing Requirements","entityType":"Development Standard","observations":["Test-Driven Development (TDD) is mandatory - write tests before implementation code","Record baseline test coverage (go test ./... -cover) before making changes","All tests must pass before marking Taskmaster tasks as 'done'","Always run full test suite after code changes","Focus on integration tests over mocks except for external APIs","Verify code compiles successfully after changes"]}
{"type":"entity","name":"Git Workflow Standards","entityType":"Development Standard","observations":["Default merge strategy: squash and merge","Before pushing to main: run 'go build -o youtube-release' and 'chmod +x youtube-release'","Always check git status for uncommitted changes before operations","Show files to be staged before running git add","Use GitHub MCP tools for remote operations, git CLI for local operations","After go mod changes: run 'go mod vendor' to sync vendor directory","bmutziu/youtube-automation requires PRs - no direct pushes to main branch","Working on bmutziu/youtube-automation fork - always use origin remote for pushes and PRs, not upstream"]}
{"type":"entity","name":"PRD Management Workflow","entityType":"Development Standard","observations":["PRDs are GitHub Issues labeled 'PRD' - single source of truth","Use mcp_github_list_issues with 'PRD' label to fetch requirements","Must use Taskmaster to generate tasks from PRDs before implementation","Update GitHub Issue with work status when starting PRD","When PRD complete: close GitHub Issue and clean up local task files","Avoid duplicating PRD content in local files - work directly from GitHub Issues","NEW RULE: Immediately after merging PRD implementation, ALWAYS close the GitHub PRD Issue with completion comment","AUTOMATION REMINDER: Use mcp_github_add_issue_comment + mcp_github_update_issue to close PRDs","FAILURE POINT: The gap between 'code merged' and 'PRD administratively closed' is where we lose track","LESSON LEARNED: Previously completed PRDs had GitHub Issues left open - this caused confusion about project status"]}
{"type":"entity","name":"Core Development Guidelines","entityType":"Development Standard","observations":["Always suggest commit messages rather than asking user to provide them","Present choices as numbered lists for easy user selection","Memory MCP: READ-ONLY unless explicitly asked to update by user","When in doubt about syntax/features: consult Context7 documentation","Validate Nushell scripts after modification using script --help","Add new unit tests for new features even if existing tests pass","Always append '| cat' to gh, git, and aws CLI commands to prevent paging"]}
{"type":"entity","name":"PRD Workflow Best Practice","entityType":"workflow","observations":["PRDs should be GitHub Issues labeled 'PRD' as single source of truth","Local PRD markdown files (.taskmaster/docs/*.md) should be DELETED after creating GitHub Issue","This prevents confusion and ensures GitHub Issue is the authoritative version","Workflow: 1) Create PRD markdown file, 2) Create GitHub Issue with PRD content, 3) Delete local PRD file, 4) Use parse_prd with GitHub Issue content or recreate local file from issue","GitHub Issues provide better collaboration, comments, tracking, and version control"]}
{"type":"entity","name":"Complete Session Workflow","entityType":"Workflow","observations":["COMPLETE SESSION COMPLETION PROTOCOL: When user indicates session completion with phrases like:","- 'We're done', 'I'm done', 'That's it', 'Finished', 'Complete', 'All set'","- 'Ready to wrap up', 'Time to finish', 'Let's close this out'","- Or any phrase indicating work completion and session ending","Follow ALL these steps in order:","PHASE 0: PRE-SUBMISSION VALIDATION (Steps 0.1-0.3)","0.1. Run full test suite to ensure all tests pass (go test ./...)","0.2. Run performance tests if API endpoints were modified (go test ./... -tags=performance -v -timeout=60s)","0.3. Verify build succeeds (go build -o youtube-release && chmod +x youtube-release)","PERFORMANCE TEST CRITERIA: Only run performance tests (step 0.2) if:","- New API endpoints were added","- Existing API endpoints were modified","- Performance-critical code was changed","- This is the final validation before PRD completion","PHASE 1: CODE SUBMISSION (Steps 1-6)","1. Check git status for uncommitted changes","2. Create feature branch with descriptive name (feature/prd-XXX-description)","3. Stage all changes (git add .)","4. Commit with comprehensive message including feat/docs/fix prefix","5. Push branch to origin (git push -u origin branch-name)","6. Create PR with detailed description using GitHub MCP","PHASE 2: REVIEW & MERGE (Steps 7-12)","7. Check PR reviews using mcp_github_get_pull_request_reviews","8. If approved: merge PR using mcp_github_merge_pull_request with squash method","9. Switch to main branch (git checkout main) - MUST BE DONE BEFORE DELETING FEATURE BRANCH","10. Delete feature branch locally (git branch -d branch-name)","11. Delete remote feature branch (git push origin --delete branch-name)","12. Pull latest changes (git pull origin main)","PHASE 3: POST-MERGE CLEANUP (Steps 13-15)","13. Close GitHub PRD Issue with completion comment using mcp_github_add_issue_comment + mcp_github_update_issue","14. Clean up local task files (rm -f .taskmaster/tasks/*)","15. Delete local PRD file (rm -f .taskmaster/docs/prd_*.txt)","PHASE 4: API CHANGE HANDLING (Step 16)","16. If API endpoints were modified: create corresponding PRD in youtube-web repository","CRITICAL: All 19 steps must be completed - frequently steps 7-19 are forgotten!","WORKFLOW CLASSIFICATION: Use CODE CHANGES workflow (manual review) if ANY *.go files modified, regardless of docs/memory changes","STEP 7 CLARIFICATION: Check reviews using mcp_github_get_pull_request_reviews","- Analyze any review comments for critical issues vs enhancements","- Human approval NOT required for merge - owner can self-approve","- Bot reviews (like Copilot) provide suggestions but are not blocking","- Proceed to merge if no critical issues identified","REVIEW ANALYSIS CRITERIA: Critical = security, breaking changes, test failures; Enhancement = style, minor improvements","PHASE 2 STEP ORDER CORRECTION: Steps 9-12 reordered to prevent git branch deletion error:","- Step 9: Switch to main branch FIRST (cannot delete branch you're currently on)","- Step 10: Delete local feature branch (now safe to delete)","- Step 11: Delete remote feature branch","- Step 12: Pull latest changes","PERFORMANCE TESTING INTEGRATION: Phase 0 ensures quality validation before code submission","- Regular tests (step 0.1) catch functional regressions","- Performance tests (step 0.2) prevent performance regressions in API layer","- Build verification (step 0.3) ensures deployability","- Performance tests use build tags to avoid slowing down regular development testing","- Command: go test ./internal/api -tags=performance -v -timeout=60s for API-specific performance validation"]}
{"type":"entity","name":"Repository Fork Information","entityType":"Development Configuration","observations":["Working on bmutziu/youtube-automation fork","Origin remote: https://github.com/bmutziu/youtube-automation.git","Upstream remote: https://github.com/vfarcic/youtube-automation.git","Always use origin for pushes, PRs, and GitHub MCP operations","Use upstream only for pulling latest changes from original repo if needed"]}
{"type":"entity","name":"CLI Usage Guidelines","entityType":"Development Standard","observations":["MANDATORY: Always append '| cat' to gh, git, and aws CLI commands to prevent paging","Examples: 'gh repo view owner/repo | cat', 'git log --oneline | cat', 'aws s3 ls | cat'","This prevents interactive pagers from interrupting automated workflows","User specifically requested this be remembered permanently","Apply to ALL gh, git, and aws CLI commands without exception"]}
{"type":"entity","name":"Claude CLI Configuration","entityType":"Development Tool","observations":["User has Claude Team subscription at claude.ai/settings/claude-code","For Team subscriptions, use 'claude setup-token' command instead of custom API key","Custom API key in environment (for taskmaster-ai MCP) should not be used for Claude CLI auth","If authentication setup fails, can reset and use token-based auth","Current version: 1.0.52 (npm-global)","Configuration stored in ~/.claude/ directory","Claude Code is currently at capacity - signups paused","Cannot complete setup-token process due to capacity limitations","User has Team subscription but Claude Code access is separate waitlist","Blog post recommendations may not be immediately implementable due to capacity constraints","Claude CLI works with custom API key despite Claude Code capacity limits","Local CLI functionality is available even when web Claude Code is at capacity","API key from taskmaster-ai MCP config can be used for local Claude CLI","Simple test: 'claude --print \"What is 2+2?\"' returns '4'","CLI provides project-aware responses when run from project directory","CORRECTED: GitHub integration DOES work with ANTHROPIC_API_KEY","Successfully set ANTHROPIC_API_KEY as GitHub repository secret","GitHub Actions workflow configured correctly with claude-code-action@beta","GitHub integration available despite Claude Code web capacity limits","Secret set on 2025-07-15T20:42:04Z in bmutziu/youtube-automation repository","GitHub Actions workflows are disabled by default on forks with existing workflow files","Security feature prevents automatic execution of potentially malicious workflows","User must manually enable Actions in GitHub UI after reviewing workflow files","Message: 'Workflows aren't being run on this forked repository... we have disabled them from running on this fork'","Once enabled by user, GitHub integration with @claude mentions will work properly","GitHub integration SUCCESS! Claude responding to @claude mentions","Workflow triggered successfully: Run ID 16303990419","Claude response appears as github-actions[bot] in issue comments","Real-time updates: Response builds incrementally with todo list","Links to job run provided in response","Complete integration working as described in DevOps Toolkit blog post","Complete workflow execution took 3m37s","Claude provided comprehensive project analysis with architectural diagrams","Final response included detailed breakdown of all components","Workflow completed successfully with all steps passing","Response demonstrates sophisticated code analysis capabilities","GITHUB_TOKEN is automatically provided by GitHub Actions - not manually configured","Only manually configured secret: ANTHROPIC_API_KEY","GITHUB_TOKEN gives workflow permissions to interact with repository","Automatic token scope limited to the specific repository and workflow run","Security: GITHUB_TOKEN cannot access other repositories or account-wide settings"]}
{"type":"entity","name":"Blog Post Workflow Implementation","entityType":"Development Process","observations":["Following DevOps Toolkit blog post workflow exactly","Using PRDs as GitHub Issues with Claude integration","Step-by-step approach with analysis at each critical operation","Goal: Implement autonomous AI coding workflow as described","Will analyze and document each step for learning and optimization","Step 1 complete: PRD created as GitHub Issue with comprehensive requirements","Step 2 in progress: Claude analyzing PRD with 8-task methodology","Workflow trigger successful for both issue_comment and issues events","Claude demonstrates systematic analysis approach - code investigation first","Progressive response building with real-time task tracking","Blog post workflow validation: PRD → Analysis → Implementation approach confirmed"]}
{"type":"relation","from":"YouTube Automation Tool","to":"Project Config","relationType":"uses"}
{"type":"relation","from":"YouTube Automation Tool","to":"Project Requirements","relationType":"requires"}
{"type":"relation","from":"Project","to":"YouTube Automation Tool","relationType":"is"}
{"type":"relation","from":"YouTube Automation Tool","to":"Charmbracelet Libraries","relationType":"uses for UI"}
{"type":"relation","to":"Taskmaster","relationType":"means user wants to work with","from":"Get PRDs"}
{"type":"relation","from":"Get PRDs","relationType":"means user wants to work with","to":"GitHub Issues with PRD label"}
{"type":"relation","to":"Taskmaster","from":"GitHub Issues with PRD label","relationType":"are used as PRDs for"}
{"type":"relation","from":"YouTube Automation Tool","to":"youtube-web","relationType":"provides API for"}
{"type":"relation","from":"YouTube Automation Tool","to":"Testing Requirements","relationType":"follows"}
{"type":"relation","from":"YouTube Automation Tool","to":"Git Workflow Standards","relationType":"follows"}
{"type":"relation","from":"YouTube Automation Tool","to":"PRD Management Workflow","relationType":"follows"}
{"type":"relation","from":"YouTube Automation Tool","to":"Repository Fork Information","relationType":"is hosted in"}
{"type":"relation","from":"YouTube Automation Tool","to":"CLI Usage Guidelines","relationType":"follows"}
{"type":"relation","from":"Git Workflow Standards","to":"CLI Usage Guidelines","relationType":"includes"}
{"type":"relation","from":"YouTube Automation Tool","to":"Claude CLI Configuration","relationType":"uses"}